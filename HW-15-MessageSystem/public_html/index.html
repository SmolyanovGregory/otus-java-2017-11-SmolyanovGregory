<html>

<head>
    <meta charset="UTF-8"/>
    <title>Sign in, please:</title>
    <script type="text/javascript">
      var ws;
	  
      function init() {
        ws = new WebSocket("ws://localhost:8080/signin");
			
        ws.onopen = function (event) {
        }
			
        ws.onmessage = function (event) {
          //var cacheStateInfo = JSON.parse(event.data);
		  console.log("event.data = " + event.data);
		  var isAdmin = event.data == "true";
		  
		  if (isAdmin) {
		    console.log("admin=true");
			window.location.href = "http://localhost:8080/adm.html";
		  } else {
		    var login = document.getElementById("login").value;
			window.location.href = "http://localhost:8080/user.html?login="+login;
		  }
        }
			
        ws.onclose = function (event) {
        }
      };

      function signIn() {
	    var login = document.getElementById("login").value;
		var psw = document.getElementById("password").value;
        var json = JSON.stringify({login : login, password : psw});
        ws.send(json);	  
	  }
	  
    </script>	
</head>

<body onload="init();">

<form name="sign" action="/signin">

    <table border=0 cellspacing=0 cellpadding=0>
        <tr>
            <td width=120 valign=center align=center colspan="2">
                Sign in, please:
            </td>
        </tr>

        <tr>
            <td width=100 valign=center>&nbsp;</td>
            <td width=150 valign=center>&nbsp;</td>
        </tr>

        <tr>
            <td width=100 valign=center align=left>Login:</td>
            <td width=150 valign=center><input type="text" id="login" name="login"/></td>
        </tr>

        <tr>
            <td width=100 valign=center>&nbsp;</td>
            <td width=150 valign=center>&nbsp;</td>
        </tr>

        <tr>
            <td width=100 valign=center align=left>Password:</td>
            <td width=150 valign=center><input type="password" id="password" name="password"/></td>
        </tr>

        <tr>
            <td width=100 valign=center>&nbsp;</td>
            <td width=150 valign=center>&nbsp;</td>
        </tr>

        <tr>
            <td width=100 valign=center align=center colspan="2">
			    <input type="button" id="signInButton" value="Sign In" onclick="signIn();"/>
		    </td>
        </tr>
				
    </table>

</form>

</body>
</html>